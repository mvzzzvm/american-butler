(()=>{"use strict";Object.defineProperty;var e=(e=>(e.Required="required",e.Email="email",e.MinLength="minLength",e.MaxLength="maxLength",e.Password="password",e.Number="number",e.Integer="integer",e.MaxNumber="maxNumber",e.MinNumber="minNumber",e.StrongPassword="strongPassword",e.CustomRegexp="customRegexp",e.MinFilesCount="minFilesCount",e.MaxFilesCount="maxFilesCount",e.Files="files",e))(e||{});let n;e.Required,e.Email,e.MaxLength,e.MinLength,e.Password,e.StrongPassword,e.Number,e.MaxNumber,e.MinNumber,e.MinFilesCount,e.MaxFilesCount,e.Files;const t=document.querySelector(".popup-outer-container");function r(){var e;window.removeEventListener("keydown",s),(e=t)&&(e.classList.remove("popup--open"),document.body.classList.remove("_lock"));const r=n.indexOf("smaller-popup");r>-1&&n.splice(r,1),t.classList.remove(...n),setTimeout((()=>{r>-1&&t.classList.remove("smaller-popup"),undefined.insertAdjacentElement("afterbegin",undefined)}),500)}function s(e){if(9===e.keyCode){let n=document.querySelector(".popup--open").querySelectorAll("input,button,select,textarea");if(n.length){let t=n[0],r=n[n.length-1];e.shiftKey?e.target===t&&(r.focus(),e.preventDefault()):e.target===r&&(t.focus(),e.preventDefault())}}}async function o(e=null){const n=document.querySelector(".popular__cards-list");n&&(a(n),function(e){a(e),e.classList.add("loading"),e.insertAdjacentHTML("afterbegin",i)}(n),await(2e3,new Promise((e=>setTimeout(e,2e3)))),fetch("data/cards.json").then((e=>e.json())).then((function(t){const r=function(e,n){if(!n)return e;let t=[];const r=Object.entries(n).filter((e=>e[1].length>0)).reduce(((e,n)=>e.add(n[0])),new Set);for(const s of e){let e=0;for(const t of Object.keys(n))"price"===t?parseInt(s[t])<=parseInt(n[t][0])?(e+=1,s[t]):s[t]:"location"===t?n[t].includes("all")||n[t].includes(s[t])?(e+=1,s[t]):s[t]:n[t].includes(s[t])?(e+=1,s[t]):s[t];r.size===e&&t.push(s)}return t}(t,e);if(function(e){const n=e.querySelector(".loader");n&&n.remove(),e.classList.remove("loading")}(n),0===r.length)!function(e){e.insertAdjacentHTML("afterbegin",'\n   <li class="popular__card card card--empty">\n         <div class="card__data">\n            <div class="card__header">\n               <h6 class="card__title">Подходящих карточек не найдено</h6>\n            </div>\n         </div>\n   </li>\n   ')}(n);else for(const e of r){const t=c(e);n.insertAdjacentHTML("beforeend",t)}})).then((()=>lazyLoadInstance.update())))}function a(e){for(;e.children.length>0;)e.children[e.children.length-1].remove()}t.querySelector(".popup-body");const i='<li class="loader"><div></div><div></div><div></div><div></div></li>';function c(e){return`\n<li class="popular__card card${e.isNew?" card--new":""}">\n      <div class="card__image">\n         <img \n            src="img/spinner.svg" class="lazy"\n            data-src="${e.img}" alt="${e.title}" />\n      </div>\n      <div class="card__data">\n         <div class="card__header">\n            <h6 class="card__title">${e.title}</h6>\n            <span class="card__price"> $${e.price}${e.pricePer?"/"+e.pricePer:""}</span>\n         </div>\n         <ul class="card__properties">\n            <li class="card__property">\n                  <span>Тип:</span> ${e.type}\n            </li>\n            <li class="card__property"><span>Статус:</span> ${e.status}</li>\n            <li class="card__property"><span>Район:</span> ${e.location}</li>\n         </ul>\n         <div class="card__buttons">\n            <button type="button" class="button light-button">\n                  Подробнее\n            </button>\n            <button type="button" class="button dark-button">\n                  Оставить заявку\n            </button>\n         </div>\n      </div>\n</li>\n`}document.querySelector(".popular__cards-list")&&o(),function(){const e=document.querySelector(".popular__filter form");e&&e.addEventListener("submit",(n=>{n.preventDefault();const t=function(e){const n=new FormData(e),t=new Set,r={};e.querySelectorAll("[name]").forEach((e=>t.add(e.name)));for(const e of t)r[e]=n.getAll(e);return r}(e);o(t),window.removeEventListener("keydown",s),document.querySelectorAll(".popup--open").forEach((e=>r()))}))}()})();
//# sourceMappingURL=cards.min.js.map